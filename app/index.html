<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title></title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width">
  <link rel="stylesheet" href="styles/bootstrap.css">
  <link rel="stylesheet" href="styles/style.css" />
  <link rel="stylesheet" href="../dist/angular-datepicker.css" />
</head>
<body ng-app="sample">
  <div class="row-fluid" ng-controller="DemoController">
    <div class="span6">
      <div>
        <h3>Timezone support</h3>

        <div ng-repeat="timezone in timezones">

          <h4>{{timezone[0]}}</h4>

          <div date-picker="dates.today" timezone="{{timezone[1]}}" view="hours" min-view="hours" watch-direct-changes="true"></div>

        </div>

        <h4>No timezone (Uses local. Buggy, needs work)</h4>

        <div date-picker="dates.today" view="hours" min-view="hours" watch-direct-changes="true"></div>

      </div>

      <h3>Custom formats</h3>
      <div ng-repeat="format in formats">
        <h5>{{format}}</h5>
        <input type="text" date-time ng-model="dates.today" required="true" view="hours" partial="true" format="{{format}}">
      </div>
    </div>
    <div class="span6">
      <h3>Minimum / Maximum dates</h3>
      <div>
        <h4>Minimum date</h4>

        <input date-time ng-model="dates.today" id="pickerMinDate" min-date="minDate" view="date" min-view="hours" timezone="UTC" format="lll">

      </div>

      <div>
        <h4>Maximum date</h4>

        <input date-time ng-model="dates.today" id="pickerMaxDate" max-date="maxDate" view="date" min-view="hours" timezone="UTC" format="lll">

      </div>

      <div>
        <h4>Maximum and minimum dates</h4>

        <input date-time ng-model="dates.today" id="pickerBothDates" min-date="minDate" max-date="maxDate" view="date" min-view="hours" timezone="UTC" format="lll">

      </div>

      <h3>Update events</h3>
      <div>
        <h4>Minimum date</h4>

        <input date-time ng-model="minDate" date-change="changeMinMax" view="date" timezone="UTC" format="lll">

      </div>
      <div>
        <h4>Maximum date</h4>

        <input date-time ng-model="maxDate" date-change="changeMinMax" view="date" timezone="UTC" format="lll">

      </div>

      <div>
        <h4>Default view</h4>

        <select ng-change="changeData('view')"
                ng-options="view for view in views"
                ng-model="options.view"></select>

      </div>

      <div>
        <h4>Min view</h4>

        <select ng-change="changeData('minView')"
                ng-options="view for view in views"
                ng-model="options.minView">
          <option value="">Disabled</option>
        </select>

      </div>

      <div>
        <h4>Max view</h4>

        <select ng-change="changeData('maxView')"
                ng-options="view for view in views"
                ng-model="options.maxView">
          <option value="">Disabled</option>
        </select>

      </div>

      <div>
        <h4>Format</h4>

        <select ng-change="changeData('format')"
                ng-options="format for format in formats"
                ng-model="options.format">
          <option value="">Disabled</option>
        </select>

      </div>

      <h3>Callback (select a date)</h3>
      <h5>{{format}}</h5>
      <input type="text" date-time ng-model="dates.today" required="true" view="hours" partial="true" date-change="changeDate">
      <span ng-bind="callbackState"></span>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.6/moment.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment-timezone/0.4.1/moment-timezone-with-data.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.0/angular.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/0.6.0/ui-bootstrap-tpls.min.js"></script>
  <script src="scripts/datePicker.js"></script>
  <script src="scripts/datePickerUtils.js"></script>
  <script src="scripts/dateRange.js"></script>
  <script src="scripts/input.js"></script>
  <script>
    var demoApp = angular.module('sample', ['datePicker', 'ui.bootstrap']);
    demoApp.controller('DemoController', function ($scope) {
      $scope.dates = {
        today: moment.tz('UTC').hour(12).startOf('h'), //12:00 UTC, today.
        minDate: moment.tz('UTC').add(-4, 'd').hour(12).startOf('h'), //12:00 UTC, four days ago.
        maxDate: moment.tz('UTC').add(4, 'd').hour(12).startOf('h'), //12:00 UTC, in four days.
      };

      $scope.options = {
        view: 'date',
        format: 'lll',
        maxView: false,
        minView: 'hours',
      };

      $scope.minDate = $scope.dates.minDate;
      $scope.maxDate = $scope.dates.maxDate;

      $scope.formats = [
         "MMMM YYYY",
         "DD MMM YYYY",
         "ddd MMM DD YYYY",
         "D MMM YYYY HH:mm",
         "lll",
      ];

      $scope.timezones = [
        ['London, UK', 'Europe/London'],
        ['Hong Kong, China', 'Asia/Hong_Kong'],
        ['Vancouver, Canada', 'America/Vancouver'],
      ];

      $scope.views = ['year', 'month', 'date', 'hours', 'minutes'];

      $scope.callbackState = 'Callback: Not fired';

      $scope.changeDate = function () {
        $scope.callbackState = 'Callback: Fired';
      }

      $scope.changeMinMax = function (modelName, newValue) {
        //minDate or maxDate updated. Generate events to update relevant pickers

        var values = {
          minDate: false,
          maxDate: false,
        }

        if (modelName === 'minDate') {
          values.minDate = newValue;
          $scope.$broadcast('pickerUpdate', 'pickerMinDate', values);
          values.maxDate = $scope.maxDate;
        } else if (modelName === 'maxDate') {
          values.maxDate = newValue;
          $scope.$broadcast('pickerUpdate', 'pickerMaxDate', values);
          values.minDate = $scope.minDate;
        }

        //For either min/max update, update the picker which uses both.
        $scope.$broadcast('pickerUpdate', 'pickerBothDates', values);
      }

      $scope.changeData = function (type) {
        var values = {};

        switch (type) {
          case 'view':
            values.view = $scope.options.view;
            break;
          case 'minView':
            values.minView = $scope.options.minView;
            break;
          case 'maxView':
            values.maxView = $scope.options.maxView;
            break;
          case 'format':
            values.format = $scope.options.format;
            break;
        }

        if (values) {
          $scope.$broadcast('pickerUpdate', ['pickerMinDate', 'pickerMaxDate', 'pickerBothDates'], values);
        }
      }
    });
  </script>
</body>
</html>
